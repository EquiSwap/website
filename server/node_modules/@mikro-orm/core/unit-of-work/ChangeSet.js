"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ChangeSetType = exports.ChangeSet = void 0;
class ChangeSet {
    constructor(entity, type, payload, meta) {
        this.entity = entity;
        this.type = type;
        this.payload = payload;
        this.name = meta.className;
        this.rootName = meta.root.className;
        this.collection = meta.root.collection;
        this.schema = entity.__helper.__schema ?? meta.root.schema;
    }
    getPrimaryKey() {
        this.primaryKey ?? (this.primaryKey = this.entity.__helper.getPrimaryKey(true));
        return this.primaryKey;
    }
    getSerializedPrimaryKey() {
        this.serializedPrimaryKey ?? (this.serializedPrimaryKey = this.entity.__helper.getSerializedPrimaryKey());
        return this.serializedPrimaryKey;
    }
}
exports.ChangeSet = ChangeSet;
var ChangeSetType;
(function (ChangeSetType) {
    ChangeSetType["CREATE"] = "create";
    ChangeSetType["UPDATE"] = "update";
    ChangeSetType["DELETE"] = "delete";
    ChangeSetType["DELETE_EARLY"] = "delete_early";
})(ChangeSetType = exports.ChangeSetType || (exports.ChangeSetType = {}));
