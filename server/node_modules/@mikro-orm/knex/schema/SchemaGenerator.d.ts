import { AbstractSchemaGenerator } from '@mikro-orm/core';
import type { SchemaDifference } from '../typings';
import { DatabaseSchema } from './DatabaseSchema';
import type { AbstractSqlDriver } from '../AbstractSqlDriver';
/**
 * Should be renamed to `SqlSchemaGenerator` in v6
 */
export declare class SchemaGenerator extends AbstractSchemaGenerator<AbstractSqlDriver> {
    private readonly helper;
    private readonly knex;
    private readonly options;
    generate(): Promise<string>;
    createSchema(options?: {
        wrap?: boolean;
        schema?: string;
    }): Promise<void>;
    /**
     * Returns true if the database was created.
     */
    ensureDatabase(): Promise<boolean>;
    getTargetSchema(schema?: string): DatabaseSchema;
    getCreateSchemaSQL(options?: {
        wrap?: boolean;
        schema?: string;
    }): Promise<string>;
    dropSchema(options?: {
        wrap?: boolean;
        dropMigrationsTable?: boolean;
        dropDb?: boolean;
        schema?: string;
    }): Promise<void>;
    clearDatabase(options?: {
        schema?: string;
        truncate?: boolean;
    }): Promise<void>;
    getDropSchemaSQL(options?: {
        wrap?: boolean;
        dropMigrationsTable?: boolean;
        schema?: string;
    }): Promise<string>;
    private getSchemaName;
    updateSchema(options?: {
        wrap?: boolean;
        safe?: boolean;
        dropTables?: boolean;
        fromSchema?: DatabaseSchema;
        schema?: string;
    }): Promise<void>;
    getUpdateSchemaSQL(options?: {
        wrap?: boolean;
        safe?: boolean;
        dropTables?: boolean;
        fromSchema?: DatabaseSchema;
        schema?: string;
    }): Promise<string>;
    getUpdateSchemaMigrationSQL(options?: {
        wrap?: boolean;
        safe?: boolean;
        dropTables?: boolean;
        fromSchema?: DatabaseSchema;
        schema?: string;
    }): Promise<{
        up: string;
        down: string;
    }>;
    private prepareSchemaForComparison;
    diffToSQL(schemaDiff: SchemaDifference, options: {
        wrap?: boolean;
        safe?: boolean;
        dropTables?: boolean;
        schema?: string;
    }): Promise<string>;
    private getReferencedTableName;
    private createForeignKey;
    /**
     * We need to drop foreign keys first for all tables to allow dropping PK constraints.
     */
    private preAlterTable;
    private splitTableName;
    private alterTable;
    /**
     * creates new database and connects to it
     */
    createDatabase(name: string): Promise<void>;
    dropDatabase(name: string): Promise<void>;
    execute(sql: string, options?: {
        wrap?: boolean;
    }): Promise<void>;
    private wrapSchema;
    private createSchemaBuilder;
    private createTable;
    private createIndex;
    private dropIndex;
    private createCheck;
    private dropCheck;
    private dropTable;
    private configureColumn;
    private createForeignKeys;
    private dump;
}
